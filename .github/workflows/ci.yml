on:
push:
branches: [ "main" ]
pull_request:
branches: [ "main" ]

jobs:
build-check:
runs-on: ubuntu-latest
strategy:
matrix:
node-version: [18.x]

steps:
- uses: actions/checkout@v4
  
- name: Set up Node.js ${{ matrix.node-version }}
  uses: actions/setup-node@v4
  with:
    node-version: ${{ matrix.node-version }}
    cache: 'npm'
    cache-dependency-path: '**/package-lock.json' 

# Install dependencies inside the backend folder
- name: Install backend dependencies
  run: npm install
  working-directory: ./backend
  
# Placeholder for running actual tests or linting
- name: Run build checks
  run: echo "CI check passed."
  working-directory: ./backend

# Generate Prisma client using the backend working directory
- name: Generate Prisma client
  run: npx prisma generate
  working-directory: ./backend
